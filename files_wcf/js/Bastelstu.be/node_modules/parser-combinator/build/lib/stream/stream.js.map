{"version":3,"sources":["../../../src/lib/stream/stream.js"],"names":["Stream","index","endOfStream","failure","Error","success","unsafeGet","e","s","i","length","value","get","isSuccess"],"mappings":";;;;;;qjBAAA;;;;;;;;AAQA;;;;;;;;IAEMA,M;AACF,sBAAc;AAAA;AAAE;;AAEhB;;;;;iCACSC,K,EAAO;AACZ,mBAAOA,KAAP;AACH;;AAED;;;;4BACIA,K,EAAO;AACP,gBAAI;AACA,oBAAI,KAAKC,WAAL,CAAiBD,KAAjB,CAAJ,EAA6B;AACzB,2BAAO,cAAKE,OAAL,CAAa,IAAIC,KAAJ,CAAU,uBAAV,CAAb,CAAP;AACH,iBAFD,MAEO;AACH,2BAAO,cAAKC,OAAL,CAAa,KAAKC,SAAL,CAAeL,KAAf,CAAb,CAAP;AACH;AACJ,aAND,CAME,OAAOM,CAAP,EAAU;AACR,uBAAO,cAAKJ,OAAL,CAAaI,CAAb,CAAP;AACH;AACJ;;AAED;;;;oCACYC,C,EAAGP,K,EAAO;AAClB,iBAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAID,EAAEE,MAAtB,EAA8BD,GAA9B,EAAmC;AAC/B,oBAAIE,QAAQ,KAAKC,GAAL,CAASH,IAAIR,KAAb,CAAZ;AACA,oBAAI,CAACU,MAAME,SAAN,EAAD,IAAsBF,MAAMN,OAAN,OAAoBG,EAAEC,CAAF,CAA9C,EAAoD;AAChD,2BAAO,KAAP;AACH;AACJ;;AAED,mBAAO,IAAP;AACH;;;;;;kBAGUT,M","file":"stream.js","sourcesContent":["/*\r\n * Parsec\r\n * https://github.com/d-plaindoux/parsec\r\n *\r\n * Copyright (c) 2016 Didier Plaindoux\r\n * Licensed under the LGPL2 license.\r\n */\r\n\r\nimport atry from '../data/try';\r\n\r\nclass Stream {\r\n    constructor() {}\r\n\r\n    // Stream 'a => number -> number\r\n    location(index) {\r\n        return index;\r\n    }\r\n\r\n    // Stream 'a => number -> Try 'a\r\n    get(index) {\r\n        try {\r\n            if (this.endOfStream(index)) {\r\n                return atry.failure(new Error('End of stream reached'));\r\n            } else {\r\n                return atry.success(this.unsafeGet(index));\r\n            }\r\n        } catch (e) {\r\n            return atry.failure(e);\r\n        }\r\n    }\r\n\r\n    // Stream 'a => [Comparable 'a] -> number -> boolean\r\n    subStreamAt(s, index) {\r\n        for (var i = 0; i < s.length; i++) {\r\n            var value = this.get(i + index);\r\n            if (!value.isSuccess() || value.success() !== s[i]) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\nexport default Stream;\r\n"]}