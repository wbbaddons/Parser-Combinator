{"version":3,"sources":["../../../src/lib/data/try.js"],"names":["Try","value","error","isSuccess","bindCall","isFailure","success","e","failure","f","Error"],"mappings":";;;;;;;;;;AAAA;;;;;;;;IAQMA,G;AACF,iBAAYC,KAAZ,EAAmBC,KAAnB,EAA0B;AAAA;;AACtB,aAAKD,KAAL,GAAaA,KAAb;AACA,aAAKC,KAAL,GAAaA,KAAb;AACH;;;;oCAEW;AACR,mBAAO,KAAKA,KAAL,KAAe,IAAtB;AACH;;;oCAEW;AACR,mBAAO,CAAC,KAAKC,SAAL,EAAR;AACH;;;kCAESC,Q,EAAU;AAChB,gBAAI,KAAKD,SAAL,EAAJ,EAAsB;AAClBC,yBAAS,KAAKH,KAAd;AACH;;AAED,mBAAO,IAAP;AACH;;;kCAESG,Q,EAAU;AAChB,gBAAI,KAAKC,SAAL,EAAJ,EAAsB;AAClBD,yBAAS,KAAKF,KAAd;AACH;;AAED,mBAAO,IAAP;AACH;;;4BAEGE,Q,EAAU;AACV,gBAAI,KAAKD,SAAL,EAAJ,EAAsB;AAClB,oBAAI;AACA,2BAAOG,QAAQF,SAAS,KAAKH,KAAd,CAAR,CAAP;AACH,iBAFD,CAEE,OAAOM,CAAP,EAAU;AACR,2BAAOC,QAAQD,CAAR,CAAP;AACH;AACJ,aAND,MAMO;AACH,uBAAO,IAAP;AACH;AACJ;;;gCAEOH,Q,EAAU;AACd,gBAAI,KAAKD,SAAL,EAAJ,EAAsB;AAClB,oBAAI;AACA,2BAAOC,SAAS,KAAKH,KAAd,CAAP;AACH,iBAFD,CAEE,OAAOM,CAAP,EAAU;AACR,2BAAOC,QAAQD,CAAR,CAAP;AACH;AACJ,aAND,MAMO;AACH,uBAAO,IAAP;AACH;AACJ;;;kCAES;AACN,mBAAO,KAAKN,KAAZ;AACH;;;kCAES;AACN,mBAAO,KAAKC,KAAZ;AACH;;;oCAEWD,K,EAAO;AACf,gBAAI,KAAKE,SAAL,EAAJ,EAAsB;AAClB,uBAAO,KAAKF,KAAZ;AACH,aAFD,MAEO;AACH,uBAAOA,KAAP;AACH;AACJ;;;wCAEeA,K,EAAO;AACnB,gBAAI,KAAKE,SAAL,EAAJ,EAAsB;AAClB,uBAAO,KAAKF,KAAZ;AACH,aAFD,MAEO;AACH,uBAAOA,MAAM,KAAKC,KAAX,CAAP;AACH;AACJ;;;+BACMO,C,EAAG;AACN,gBAAI,KAAKN,SAAL,EAAJ,EAAsB;AAClB,oBAAIM,EAAE,KAAKR,KAAP,CAAJ,EAAmB;AACf,2BAAO,IAAP;AACH,iBAFD,MAEO;AACH,2BAAOO,QAAQ,IAAIE,KAAJ,CAAU,gBAAV,CAAR,CAAP;AACH;AACJ;;AAED,mBAAO,IAAP;AACH;;;;;;AAGL,SAASJ,OAAT,CAAiBL,KAAjB,EAAwB;AACpB,WAAO,IAAID,GAAJ,CAAQC,KAAR,EAAe,IAAf,CAAP;AACH;;AAED,SAASO,OAAT,CAAiBN,KAAjB,EAAwB;AACpB,WAAO,IAAIF,GAAJ,CAAQ,IAAR,EAAcE,KAAd,CAAP;AACH;;kBAEc;AACXI,oBADW;AAEXE;AAFW,C","file":"try.js","sourcesContent":["/*\r\n * Parsec\r\n * https://github.com/d-plaindoux/parsec\r\n *\r\n * Copyright (c) 2016 Didier Plaindoux\r\n * Licensed under the LGPL2 license.\r\n */\r\n\r\nclass Try {\r\n    constructor(value, error) {\r\n        this.value = value;\r\n        this.error = error;\r\n    }\r\n\r\n    isSuccess() {\r\n        return this.error === null;\r\n    }\r\n\r\n    isFailure() {\r\n        return !this.isSuccess();\r\n    }\r\n\r\n    onSuccess(bindCall) {\r\n        if (this.isSuccess()) {\r\n            bindCall(this.value);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    onFailure(bindCall) {\r\n        if (this.isFailure()) {\r\n            bindCall(this.error);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    map(bindCall) {\r\n        if (this.isSuccess()) {\r\n            try {\r\n                return success(bindCall(this.value));\r\n            } catch (e) {\r\n                return failure(e);\r\n            }\r\n        } else {\r\n            return this;\r\n        }\r\n    }\r\n\r\n    flatmap(bindCall) {\r\n        if (this.isSuccess()) {\r\n            try {\r\n                return bindCall(this.value);\r\n            } catch (e) {\r\n                return failure(e);\r\n            }\r\n        } else {\r\n            return this;\r\n        }\r\n    }\r\n\r\n    success() {\r\n        return this.value;\r\n    }\r\n\r\n    failure() {\r\n        return this.error;\r\n    }\r\n\r\n    recoverWith(value) {\r\n        if (this.isSuccess()) {\r\n            return this.value;\r\n        } else {\r\n            return value;\r\n        }\r\n    }\r\n\r\n    lazyRecoverWith(value) {\r\n        if (this.isSuccess()) {\r\n            return this.value;\r\n        } else {\r\n            return value(this.error);\r\n        }\r\n    }\r\n    filter(f) {\r\n        if (this.isSuccess()) {\r\n            if (f(this.value)) {\r\n                return this;\r\n            } else {\r\n                return failure(new Error('invalid filter'));\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\nfunction success(value) {\r\n    return new Try(value, null);\r\n}\r\n\r\nfunction failure(error) {\r\n    return new Try(null, error);\r\n}\r\n\r\nexport default {\r\n    success,\r\n    failure,\r\n};\r\n"]}