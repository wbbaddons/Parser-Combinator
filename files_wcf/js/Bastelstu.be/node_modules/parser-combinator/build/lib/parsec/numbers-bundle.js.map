{"version":3,"sources":["../../../src/lib/parsec/numbers-bundle.js"],"names":["numberLiteral","join","r","joinOrEmpty","map","orElse","digits","digit","rep","integer","charIn","opt","then","float","char","parseFloat","satisfy","v","parseInt","i"],"mappings":";;;;;;AAQA;;;;AACA;;;;;;AAEA;AAXA;;;;;;;;AAYA,SAASA,aAAT,GAAyB;AACrB;AACA,QAAIC,OAAO,SAAPA,IAAO;AAAA,eAAKC,EAAED,IAAF,CAAO,EAAP,CAAL;AAAA,KAAX;AAAA,QACIE,cAAc,SAAdA,WAAc;AAAA,eAAKD,EAAEE,GAAF,CAAMH,IAAN,EAAYI,MAAZ,CAAmB,EAAnB,CAAL;AAAA,KADlB;AAAA,QAEIC,SAASC,QAAQC,GAAR,GAAcJ,GAAd,CAAkBH,IAAlB,CAFb;AAAA,QAGIQ,UAAU,sBAAEC,MAAF,CAAS,IAAT,EACLC,GADK,GAELC,IAFK,CAEAN,MAFA,EAGLF,GAHK,CAGD;AAAA,eAAKF,EAAE,CAAF,EAAKG,MAAL,CAAY,EAAZ,IAAkBH,EAAE,CAAF,CAAvB;AAAA,KAHC,CAHd;AAAA,QAOIW,QAAQJ,QACHG,IADG,CACE,sBAAEE,IAAF,CAAO,GAAP,EAAYF,IAAZ,CAAiBN,MAAjB,EAAyBK,GAAzB,GAA+BP,GAA/B,CAAmCD,WAAnC,CADF,EAEHS,IAFG,CAEE,sBAAEF,MAAF,CAAS,IAAT,EAAeE,IAAf,CAAoBH,OAApB,EAA6BE,GAA7B,GAAmCP,GAAnC,CAAuCD,WAAvC,CAFF,EAGHC,GAHG,CAGC;AAAA,eAAKF,EAAE,CAAF,IAAOA,EAAE,CAAF,CAAP,GAAcA,EAAE,CAAF,CAAnB;AAAA,KAHD,CAPZ;;AAYA,WAAOW,MAAMT,GAAN,CAAU;AAAA,eAAKW,WAAWb,CAAX,EAAc,EAAd,CAAL;AAAA,KAAV,CAAP;AACH;;AAED;AACA,SAASK,KAAT,GAAiB;AACb,WAAO,qBAAES,OAAF,CAAU;AAAA,eAAK,OAAOC,CAAP,IAAYA,KAAK,GAAtB;AAAA,KAAV,CAAP;AACH;;AAED,SAASX,MAAT,GAAkB;AACd,WAAOC,QAAQC,GAAR,GAAcJ,GAAd,CAAkB;AAAA,eAAKa,EAAEhB,IAAF,CAAO,EAAP,CAAL;AAAA,KAAlB,CAAP;AACH;;AAED,SAASQ,OAAT,GAAmB;AACf;AACA,QAAIR,OAAO,SAAPA,IAAO;AAAA,eAAKC,EAAED,IAAF,CAAO,EAAP,CAAL;AAAA,KAAX;AAAA,QACIK,SAASC,QAAQC,GAAR,GAAcJ,GAAd,CAAkBH,IAAlB,CADb;AAAA,QAEIQ,UAAU,sBAAEC,MAAF,CAAS,IAAT,EACLC,GADK,GAELC,IAFK,CAEAN,MAFA,EAGLF,GAHK,CAGD;AAAA,eAAKF,EAAE,CAAF,EAAKG,MAAL,CAAY,EAAZ,IAAkBH,EAAE,CAAF,CAAvB;AAAA,KAHC,CAFd;;AAOA,WAAOO,QAAQL,GAAR,CAAY;AAAA,eAAKc,SAASC,CAAT,EAAY,EAAZ,CAAL;AAAA,KAAZ,CAAP;AACH;;kBAEc;AACXnB,mBAAeA,eADJ;AAEXO,WAAOA,OAFI;AAGXD,YAAQA,QAHG;AAIXG,aAASA;AAJE,C","file":"numbers-bundle.js","sourcesContent":["/*\r\n * Parsec\r\n * https://github.com/d-plaindoux/parsec\r\n *\r\n * Copyright (c) 2016 Didier Plaindoux\r\n * Licensed under the LGPL2 license.\r\n */\r\n\r\nimport C from './chars-bundle';\r\nimport F from './flow-bundle';\r\n\r\n// unit -> Parser number char\r\nfunction numberLiteral() {\r\n    // [-+]?\\d+([.]\\d+)?([eE][+-]?\\d+)?\r\n    var join = r => r.join(''),\r\n        joinOrEmpty = r => r.map(join).orElse(''),\r\n        digits = digit().rep().map(join),\r\n        integer = C.charIn('+-')\r\n            .opt()\r\n            .then(digits)\r\n            .map(r => r[0].orElse('') + r[1]),\r\n        float = integer\r\n            .then(C.char('.').then(digits).opt().map(joinOrEmpty))\r\n            .then(C.charIn('eE').then(integer).opt().map(joinOrEmpty))\r\n            .map(r => r[0] + r[1] + r[2]);\r\n\r\n    return float.map(r => parseFloat(r, 10));\r\n}\r\n\r\n// unit -> Parser char char\r\nfunction digit() {\r\n    return F.satisfy(v => '0' <= v && v <= '9');\r\n}\r\n\r\nfunction digits() {\r\n    return digit().rep().map(v => v.join(''));\r\n}\r\n\r\nfunction integer() {\r\n    // [-+]?\\d+([.]\\d+)?([eE][+-]?\\d+)?\r\n    var join = r => r.join(''),\r\n        digits = digit().rep().map(join),\r\n        integer = C.charIn('+-')\r\n            .opt()\r\n            .then(digits)\r\n            .map(r => r[0].orElse('') + r[1]);\r\n\r\n    return integer.map(i => parseInt(i, 10));\r\n}\r\n\r\nexport default {\r\n    numberLiteral: numberLiteral(),\r\n    digit: digit(),\r\n    digits: digits(),\r\n    integer: integer(),\r\n};\r\n"]}