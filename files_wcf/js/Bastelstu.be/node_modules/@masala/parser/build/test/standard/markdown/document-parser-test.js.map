{"version":3,"sources":["../../../../src/test/standard/markdown/document-parser-test.js"],"names":["value","undefined","testBlock","block","parsing","parse","ofString","standardParagraph","expectedStandardParagraph","paragraph","text","lev1Title","otherLev1Title","lev1AltTitle","lev2AltTitle","expectedLev1Title","title","level","expectedOtherLev1Title","expectedLev2Title","complexParagraph","expectedComplexParagraph","italic","bold","bullet1","bullet2","bullet3","bullet4level2","bullet5level2","bullets","expectedBullet1","bullet","content","expectedBullet2","expectedBullet3","expectedBullet4level2","code","expectedBullet5level2","expectedBullets","setUp","done","test","expected","deepEqual","concat","spaceCodeLine","expectedSpaceCodeLine","tabCodeLine","expectedTabCodeLine","haskellCode","expectedHaskellCode","spaceCodeBloc","expectedSpaceCodeBloc"],"mappings":"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","file":"document-parser-test.js","sourcesContent":["/**\n * Created by Nicolas Zozol on 15/12/2016.\n */\n\nimport mdParser from '../../../lib/standard/markdown/markdown-parser';\nimport stream from '../../../lib/stream/index';\n\nlet value = undefined;\n\nfunction testBlock(block) {\n    const parsing = mdParser.parse(stream.ofString(block));\n    value = parsing.value;\n}\n\nconst standardParagraph = `Their job is to destroy\nDeath Stars.`;\nconst expectedStandardParagraph = {\n    paragraph: [{text: 'Their job is to destroy Death Stars.'}],\n};\n\nconst lev1Title = '# Star Wars Rocks';\nconst otherLev1Title = '# Star Trek also Rocks';\nconst lev1AltTitle = 'Star Wars Rocks\\n======';\nconst lev2AltTitle = 'C3PO and R2D2\\n----';\nconst expectedLev1Title = {title: {level: 1, text: 'Star Wars Rocks'}};\nconst expectedOtherLev1Title = {\n    title: {level: 1, text: 'Star Trek also Rocks'},\n};\nconst expectedLev2Title = {title: {level: 2, text: 'C3PO and R2D2'}};\n\nconst complexParagraph = `They know how to  *use the force*\n  , speed up,  and destroy **Death Stars**.`;\n\nconst expectedComplexParagraph = {\n    paragraph: [\n        {text: 'They know how to  '},\n        {italic: 'use the force'},\n        {text: '   , speed up,  and destroy '},\n        {bold: 'Death Stars'},\n        {text: '.'},\n    ],\n};\n\nconst bullet1 = '* Look for plans';\nconst bullet2 = '* Find an **unexpensive** youngster';\nconst bullet3 = '- Kill an *old man*';\nconst bullet4level2 = '    - Use the `force`';\nconst bullet5level2 = '\\t* Destroy Death Star   ';\nconst bullets = `${bullet1}\\n${bullet2}\\n${bullet3}\\n${bullet4level2}\\n${bullet5level2}`;\n\nconst expectedBullet1 = {\n    bullet: {level: 1, content: [{text: 'Look for plans'}]},\n};\nconst expectedBullet2 = {\n    bullet: {\n        level: 1,\n        content: [\n            {text: 'Find an '},\n            {bold: 'unexpensive'},\n            {text: ' youngster'},\n        ],\n    },\n};\nconst expectedBullet3 = {\n    bullet: {\n        level: 1,\n        content: [{text: 'Kill an '}, {italic: 'old man'}],\n    },\n};\nconst expectedBullet4level2 = {\n    bullet: {\n        level: 2,\n        content: [{text: 'Use the '}, {code: 'force'}],\n    },\n};\nconst expectedBullet5level2 = {\n    bullet: {\n        level: 2,\n        content: [{text: 'Destroy Death Star   '}],\n    },\n};\n\nconst expectedBullets = [\n    expectedBullet1,\n    expectedBullet2,\n    expectedBullet3,\n    expectedBullet4level2,\n    expectedBullet5level2,\n];\n\nexport default {\n    setUp: function(done) {\n        done();\n    },\n\n    'Multilines lines paragraph should be accepted': function(test) {\n        const block = `${standardParagraph}`;\n        testBlock(block);\n        const expected = [expectedStandardParagraph];\n        test.deepEqual(expected, value, 'bad value for multiline');\n        test.done();\n    },\n\n    'Complex Multilines lines should be accepted': function(test) {\n        const block = `${complexParagraph}`;\n        testBlock(block);\n        const expected = [expectedComplexParagraph];\n        test.deepEqual(expected, value, 'bad value for complex paragraph');\n        test.done();\n    },\n\n    'Read title and its paragraphs': function(test) {\n        const block = `${lev1Title}\\n${standardParagraph}\\n\\n${complexParagraph}`;\n        testBlock(block);\n        const expected = [\n            expectedLev1Title,\n            expectedStandardParagraph,\n            expectedComplexParagraph,\n        ];\n\n        test.deepEqual(expected, value, 'bad value for title & paragraphs');\n        test.done();\n    },\n\n    'Read bullets': function(test) {\n        //test.expect(2);\n        const block = `${bullets}`;\n        testBlock(block);\n\n        //test.ok(accepted, 'should be accepted.');\n        test.deepEqual(expectedBullets, value, 'bad value for bullets');\n        test.done();\n    },\n\n    'Read title, paragraph & bullets': function(test) {\n        //test.expect(2);\n        const block = `${lev1Title}\\n${bullets}\\n${standardParagraph}`;\n        testBlock(block);\n        const expected = [expectedLev1Title]\n            .concat(expectedBullets)\n            .concat([expectedStandardParagraph]);\n        test.deepEqual(expected, value, 'bad value for bullets');\n        test.done();\n    },\n\n    'Read multilevel chapters': function(test) {\n        const block = `${lev1AltTitle}\\n${bullets}\\n ${lev2AltTitle}\\n ${standardParagraph}\\n  \n${otherLev1Title}\\n ${complexParagraph}`;\n        testBlock(block);\n\n        //test.ok(accepted, 'should be accepted.');\n        const expected = [expectedLev1Title]\n            .concat(expectedBullets)\n            .concat([\n                expectedLev2Title,\n                expectedStandardParagraph,\n                expectedOtherLev1Title,\n                expectedComplexParagraph,\n            ]);\n\n        test.deepEqual(value, expected, 'bad value for complex text');\n        test.done();\n    },\n\n    /*\n     'Read multilevel with initial \\n ': function (test) {\n     //test.expect(2);\n     const block = `\n     ${lev1AltTitle}\n     ${bullets}\n     ${lev2AltTitle}\n     ${standardParagraph}\n     ${otherLev1Title}\n     ${complexParagraph}\n     `;\n     testBlock(block);\n\n     //test.ok(accepted, 'should be accepted.');\n     const expected= [expectedLev1Title, expectedBullets,\n     expectedLev2Title, expectedStandardParagraph,\n     expectedOtherLev1Title, expectedComplexParagraph];\n\n     test.deepEqual(value, expected, 'bad value for complex text');\n     test.done();\n     }  */\n    'Read space code line': function(test) {\n        const spaceCodeLine = '        Star Wars is an Atari game';\n        const expectedSpaceCodeLine = [{code: 'Star Wars is an Atari game'}];\n\n        testBlock(spaceCodeLine);\n        test.deepEqual(\n            value,\n            expectedSpaceCodeLine,\n            'bad value for space code line'\n        );\n        test.done();\n    },\n\n    'Read tab code line': function(test) {\n        const tabCodeLine = '\\t\\tStar Wars is an Amstrad game';\n        const expectedTabCodeLine = [{code: 'Star Wars is an Amstrad game'}];\n        testBlock(tabCodeLine);\n        test.deepEqual(\n            value,\n            expectedTabCodeLine,\n            'bad value for space code line'\n        );\n        test.done();\n    },\n\n    'Read tab code blocks': function(test) {\n        //test.expect(2);\n\n        const haskellCode = `\\t\\timport Control.Monad\n\\t\\t\n\\t\\tsolveTable :: [String] -> [String] -> [(String, Integer)]`;\n\n        const expectedHaskellCode = [\n            {code: 'import Control.Monad'},\n            {code: ''},\n            {code: 'solveTable :: [String] -> [String] -> [(String, Integer)]'},\n        ];\n\n        testBlock(haskellCode);\n        test.deepEqual(value, expectedHaskellCode, 'bad value for bullets');\n        test.done();\n    },\n    'Read space code blocks': function(test) {\n        //test.expect(2);\n\n        // there are 8 spaces for first line, then 10 for the second line\n        const spaceCodeBloc = `        Star Wars is an Amstrad game\n           Star Wars is an Atari game`;\n\n        const expectedSpaceCodeBloc = [\n            {code: 'Star Wars is an Amstrad game'},\n            {code: '   Star Wars is an Atari game'},\n        ];\n\n        testBlock(spaceCodeBloc);\n        test.deepEqual(expectedSpaceCodeBloc, value, 'bad value for bullets');\n        test.done();\n    },\n\n    /*  commented until I find a proper way to do this\n    'parseFile test': function (test) {\n        const fileName = path.join(__dirname, 'samples/trivial-test.md');\n        const expectedTrivialFile = [{ title: { level: 1, text: 'title1' } }];\n        let parserTemp = Parser.parseFile(fileName);\n        test.deepEqual(parserTemp.value, expectedTrivialFile, 'bad value for file \"trivial-test.md\"');\n        test.done();\n    },  */\n};\n"]}