{"version":3,"sources":["../../../src/lib/stream/stream.js"],"names":["Stream","index","endOfStream","failure","Error","success","unsafeGet","e","s","i","length","value","get","isSuccess"],"mappings":";;;;;;qjBAAA;;;;;;;;AAQA;;;;;;;;IAEMA,M;AACF,sBAAc;AAAA;AAAE;;AAEhB;;;;;iCACSC,K,EAAO;AACZ,mBAAOA,KAAP;AACH;;AAED;;;;4BACIA,K,EAAO;AACP,gBAAI;AACA,oBAAI,KAAKC,WAAL,CAAiBD,KAAjB,CAAJ,EAA6B;AACzB,2BAAO,cAAKE,OAAL,CAAa,IAAIC,KAAJ,CAAU,uBAAV,CAAb,CAAP;AACH,iBAFD,MAEO;AACH,2BAAO,cAAKC,OAAL,CAAa,KAAKC,SAAL,CAAeL,KAAf,CAAb,CAAP;AACH;AACJ,aAND,CAME,OAAOM,CAAP,EAAU;AACR,uBAAO,cAAKJ,OAAL,CAAaI,CAAb,CAAP;AACH;AACJ;;AAED;;;;oCACYC,C,EAAGP,K,EAAO;AAClB,iBAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAID,EAAEE,MAAtB,EAA8BD,GAA9B,EAAmC;AAC/B,oBAAIE,QAAQ,KAAKC,GAAL,CAASH,IAAIR,KAAb,CAAZ;AACA,oBAAI,CAACU,MAAME,SAAN,EAAD,IAAsBF,MAAMN,OAAN,OAAoBG,EAAEC,CAAF,CAA9C,EAAoD;AAChD,2BAAO,KAAP;AACH;AACJ;;AAED,mBAAO,IAAP;AACH;;;;;;kBAGUT,M","file":"stream.js","sourcesContent":["/*\n * Parsec\n * https://github.com/d-plaindoux/parsec\n *\n * Copyright (c) 2016 Didier Plaindoux\n * Licensed under the LGPL2 license.\n */\n\nimport atry from '../data/try';\n\nclass Stream {\n    constructor() {}\n\n    // Stream 'a => number -> number\n    location(index) {\n        return index;\n    }\n\n    // Stream 'a => number -> Try 'a\n    get(index) {\n        try {\n            if (this.endOfStream(index)) {\n                return atry.failure(new Error('End of stream reached'));\n            } else {\n                return atry.success(this.unsafeGet(index));\n            }\n        } catch (e) {\n            return atry.failure(e);\n        }\n    }\n\n    // Stream 'a => [Comparable 'a] -> number -> boolean\n    subStreamAt(s, index) {\n        for (var i = 0; i < s.length; i++) {\n            var value = this.get(i + index);\n            if (!value.isSuccess() || value.success() !== s[i]) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n}\n\nexport default Stream;\n"]}